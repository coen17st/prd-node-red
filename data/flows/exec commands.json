[
  {
    "id": "21c15316.41cc2c",
    "type": "tab",
    "label": "exec commands",
    "disabled": false,
    "info": ""
  },
  {
    "id": "7d226530.41a43c",
    "type": "comment",
    "z": "21c15316.41cc2c",
    "name": "backup from host to remote machine",
    "info": "",
    "x": 160,
    "y": 840,
    "wires": []
  },
  {
    "id": "d8804666.d57cf8",
    "type": "exec",
    "z": "21c15316.41cc2c",
    "command": "ssh coen@192.168.1.3 'bash /home/coen/hosts-config/proxmox-ve/docker-host/backup_purge.sh'",
    "addpay": false,
    "append": "",
    "useSpawn": "false",
    "timer": "",
    "oldrc": false,
    "name": "",
    "x": 660,
    "y": 880,
    "wires": [
      [
        "1cd851a9.9a893e"
      ],
      [
        "eabeea6.06b9d18"
      ],
      [
        "8bb352f8.425d7"
      ]
    ]
  },
  {
    "id": "8bb352f8.425d7",
    "type": "switch",
    "z": "21c15316.41cc2c",
    "name": "exit code 0",
    "property": "payload.code",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "0",
        "vt": "num"
      },
      {
        "t": "neq",
        "v": "0",
        "vt": "num"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 1090,
    "y": 900,
    "wires": [
      [],
      [
        "183c15c.501efea"
      ]
    ]
  },
  {
    "id": "183c15c.501efea",
    "type": "template",
    "z": "21c15316.41cc2c",
    "name": "message",
    "field": "message",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "Error: backup naar backup-host is niet gelukt. ",
    "output": "str",
    "x": 1260,
    "y": 900,
    "wires": [
      [
        "a49ae0e7.5e869"
      ]
    ]
  },
  {
    "id": "d698dab9.797f38",
    "type": "api-call-service",
    "z": "21c15316.41cc2c",
    "name": "notify",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "notify",
    "service": "mobile_app_phone_coen",
    "entityId": "",
    "data": "{\"message\":\"{{message}}\",\"title\":\"{{topic}}\"}",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1850,
    "y": 900,
    "wires": [
      []
    ]
  },
  {
    "id": "a49ae0e7.5e869",
    "type": "template",
    "z": "21c15316.41cc2c",
    "name": "topic",
    "field": "topic",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "Backup",
    "output": "str",
    "x": 1390,
    "y": 900,
    "wires": [
      [
        "d698dab9.797f38"
      ]
    ]
  },
  {
    "id": "1cd851a9.9a893e",
    "type": "split",
    "z": "21c15316.41cc2c",
    "name": "",
    "splt": "\\n",
    "spltType": "str",
    "arraySplt": "1",
    "arraySpltType": "len",
    "stream": false,
    "addname": "",
    "x": 1070,
    "y": 860,
    "wires": [
      [
        "26030013.e0f55"
      ]
    ]
  },
  {
    "id": "26030013.e0f55",
    "type": "switch",
    "z": "21c15316.41cc2c",
    "name": "",
    "property": "parts.index",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "0",
        "vt": "num"
      },
      {
        "t": "eq",
        "v": "11",
        "vt": "num"
      },
      {
        "t": "eq",
        "v": "14",
        "vt": "num"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 3,
    "x": 1190,
    "y": 840,
    "wires": [
      [
        "5099f986.39cc18"
      ],
      [
        "79cb6095.ffcaa"
      ],
      [
        "554e684a.67c2c8"
      ]
    ]
  },
  {
    "id": "79978a0a.3132c4",
    "type": "template",
    "z": "21c15316.41cc2c",
    "name": "",
    "field": "message",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "Purge backup van \"{{{payload.location}}} is gelukt, {{{payload.bytes}}} verzonden in {{payload.seconds}} seconden.",
    "output": "str",
    "x": 1880,
    "y": 820,
    "wires": [
      [
        "d698dab9.797f38"
      ]
    ]
  },
  {
    "id": "554e684a.67c2c8",
    "type": "string",
    "z": "21c15316.41cc2c",
    "name": "",
    "methods": [
      {
        "name": "between",
        "params": [
          {
            "type": "str",
            "value": "File list transfer time: "
          },
          {
            "type": "str",
            "value": " "
          }
        ]
      }
    ],
    "prop": "payload",
    "propout": "payload",
    "object": "msg",
    "objectout": "msg",
    "x": 1350,
    "y": 860,
    "wires": [
      [
        "42816bd.2c3fa94"
      ]
    ]
  },
  {
    "id": "5099f986.39cc18",
    "type": "string",
    "z": "21c15316.41cc2c",
    "name": "",
    "methods": [
      {
        "name": "between",
        "params": [
          {
            "type": "str",
            "value": "of "
          },
          {
            "type": "str",
            "value": "."
          }
        ]
      }
    ],
    "prop": "payload",
    "propout": "payload",
    "object": "msg",
    "objectout": "msg",
    "x": 1350,
    "y": 780,
    "wires": [
      [
        "e564adac.03f29"
      ]
    ]
  },
  {
    "id": "79cb6095.ffcaa",
    "type": "string",
    "z": "21c15316.41cc2c",
    "name": "",
    "methods": [
      {
        "name": "between",
        "params": [
          {
            "type": "str",
            "value": ": "
          },
          {
            "type": "str",
            "value": " "
          }
        ]
      }
    ],
    "prop": "payload",
    "propout": "payload",
    "object": "msg",
    "objectout": "msg",
    "x": 1350,
    "y": 820,
    "wires": [
      [
        "ea3123a8.06cac",
        "cd2bc3aa.d1443"
      ]
    ]
  },
  {
    "id": "e564adac.03f29",
    "type": "change",
    "z": "21c15316.41cc2c",
    "name": "",
    "rules": [
      {
        "t": "set",
        "p": "topic",
        "pt": "msg",
        "to": "location",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1490,
    "y": 780,
    "wires": [
      [
        "4afc6fa4.e01d9"
      ]
    ]
  },
  {
    "id": "ea3123a8.06cac",
    "type": "change",
    "z": "21c15316.41cc2c",
    "name": "",
    "rules": [
      {
        "t": "set",
        "p": "topic",
        "pt": "msg",
        "to": "bytes",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1490,
    "y": 820,
    "wires": [
      [
        "4afc6fa4.e01d9"
      ]
    ]
  },
  {
    "id": "42816bd.2c3fa94",
    "type": "change",
    "z": "21c15316.41cc2c",
    "name": "",
    "rules": [
      {
        "t": "set",
        "p": "topic",
        "pt": "msg",
        "to": "seconds",
        "tot": "str"
      }
    ],
    "action": "",
    "property": "",
    "from": "",
    "to": "",
    "reg": false,
    "x": 1490,
    "y": 860,
    "wires": [
      [
        "4afc6fa4.e01d9"
      ]
    ]
  },
  {
    "id": "4afc6fa4.e01d9",
    "type": "join",
    "z": "21c15316.41cc2c",
    "name": "",
    "mode": "custom",
    "build": "object",
    "property": "payload",
    "propertyType": "msg",
    "key": "topic",
    "joiner": "\\n",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "3",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1730,
    "y": 820,
    "wires": [
      [
        "79978a0a.3132c4"
      ]
    ]
  },
  {
    "id": "4e2b355d.088c2c",
    "type": "cronplus",
    "z": "21c15316.41cc2c",
    "name": "every day @ 03:00",
    "outputField": "payload",
    "timeZone": "",
    "persistDynamic": false,
    "commandResponseMsgOutput": "output1",
    "outputs": 1,
    "options": [
      {
        "name": "schedule1",
        "topic": "schedule1",
        "payloadType": "default",
        "payload": "",
        "expressionType": "cron",
        "expression": "0 0 3 ? * *",
        "location": "",
        "offset": "0",
        "solarType": "all",
        "solarEvents": "sunrise,sunset"
      }
    ],
    "x": 130,
    "y": 880,
    "wires": [
      []
    ]
  },
  {
    "id": "a4bdb7f3.c632b8",
    "type": "cronplus",
    "z": "21c15316.41cc2c",
    "name": "every 1ste of the month @ 03:00",
    "outputField": "payload",
    "timeZone": "",
    "persistDynamic": false,
    "commandResponseMsgOutput": "output1",
    "outputs": 1,
    "options": [
      {
        "name": "schedule1",
        "topic": "schedule1",
        "payloadType": "default",
        "payload": "",
        "expressionType": "cron",
        "expression": "0 0 3 1 * *",
        "location": "",
        "offset": "0",
        "solarType": "all",
        "solarEvents": "sunrise,sunset"
      }
    ],
    "x": 150,
    "y": 960,
    "wires": [
      []
    ]
  },
  {
    "id": "4b25aa61.d6ded4",
    "type": "exec",
    "z": "21c15316.41cc2c",
    "command": "ssh coen@192.168.1.3 'bash /home/coen/hosts-config/proxmox-ve/docker-host/backup_.sh'",
    "addpay": false,
    "append": "",
    "useSpawn": "false",
    "timer": "",
    "oldrc": false,
    "name": "",
    "x": 640,
    "y": 960,
    "wires": [
      [],
      [],
      []
    ]
  },
  {
    "id": "cd2bc3aa.d1443",
    "type": "debug",
    "z": "21c15316.41cc2c",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "statusVal": "",
    "statusType": "auto",
    "x": 1470,
    "y": 640,
    "wires": []
  },
  {
    "id": "eabeea6.06b9d18",
    "type": "debug",
    "z": "21c15316.41cc2c",
    "name": "",
    "active": true,
    "tosidebar": true,
    "console": false,
    "tostatus": false,
    "complete": "true",
    "targetType": "full",
    "statusVal": "",
    "statusType": "auto",
    "x": 1120,
    "y": 1080,
    "wires": []
  }
]