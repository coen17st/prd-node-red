[
  {
    "id": "c0da8379.b0dd3",
    "type": "tab",
    "label": "present - dark",
    "disabled": false,
    "info": ""
  },
  {
    "id": "9e995be6.7976b8",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn on light backyard",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "light",
    "service": "turn_on",
    "entityId": "light.shelly_shellydimmer_backyard_string_lights",
    "data": "{\"brightness\":50}",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1720,
    "y": 560,
    "wires": [
      [
        "13ca8b62.27a4a5"
      ]
    ]
  },
  {
    "id": "e137297f.088698",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn off light front door",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "light",
    "service": "turn_on",
    "entityId": "light.shelly_shelly1_front_door",
    "data": "",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1720,
    "y": 620,
    "wires": [
      [
        "13ca8b62.27a4a5"
      ]
    ]
  },
  {
    "id": "d5736355.e4e8e",
    "type": "switch",
    "z": "c0da8379.b0dd3",
    "name": "payload light dark",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "light",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "dark",
        "vt": "str"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 370,
    "y": 280,
    "wires": [
      [
        "9c489e3f.49b89",
        "298ec9d5.35e576",
        "5907771e.9d09a8"
      ],
      [
        "c3dc83f5.77118",
        "1d2f1c8b.ae3783",
        "b7ae8452.581398"
      ]
    ]
  },
  {
    "id": "f916039a.ab914",
    "type": "switch",
    "z": "c0da8379.b0dd3",
    "name": "state home not_home",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "home",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "not_home",
        "vt": "str"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 380,
    "y": 420,
    "wires": [
      [
        "ed71f712.b69338",
        "60ffd46b.e9534c"
      ],
      [
        "d6b1e084.f23a9"
      ]
    ]
  },
  {
    "id": "ca6dfbcc.46ac18",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn off light front door ",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "light",
    "service": "turn_off",
    "entityId": "shelly1-front-door",
    "data": "",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1720,
    "y": 220,
    "wires": [
      [
        "1ae2e15a.a292cf"
      ]
    ]
  },
  {
    "id": "c29767f.9905c98",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn off light backyard",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "light",
    "service": "turn_off",
    "entityId": "shellydimmer-backyard-string-lights",
    "data": "",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1720,
    "y": 160,
    "wires": [
      [
        "1ae2e15a.a292cf"
      ]
    ]
  },
  {
    "id": "c52b3e07.1a75e",
    "type": "server-state-changed",
    "z": "c0da8379.b0dd3",
    "name": "state persons",
    "server": "4ba92433.2478cc",
    "version": 3,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "group.persons",
    "entityidfiltertype": "exact",
    "outputinitially": false,
    "state_type": "str",
    "haltifstate": "",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "outputs": 1,
    "output_only_on_state_change": true,
    "for": "",
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": false,
    "ignorePrevStateUnavailable": false,
    "ignoreCurrentStateUnknown": false,
    "ignoreCurrentStateUnavailable": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 110,
    "y": 420,
    "wires": [
      [
        "f916039a.ab914"
      ]
    ]
  },
  {
    "id": "d08ebe33.48973",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state backyard light off",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "off",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "light.shelly_shellydimmer_backyard_string_lights",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1420,
    "y": 560,
    "wires": [
      [
        "9e995be6.7976b8"
      ],
      []
    ]
  },
  {
    "id": "cc18abb3.ae2a18",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state frontdoor light off",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "off",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "light.shelly_shelly1_front_door",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1420,
    "y": 620,
    "wires": [
      [
        "e137297f.088698"
      ],
      []
    ]
  },
  {
    "id": "9b31430f.b380a",
    "type": "server-state-changed",
    "z": "c0da8379.b0dd3",
    "name": "state outdoor light dark",
    "server": "4ba92433.2478cc",
    "version": 3,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "sensor.outdoor_light_dark",
    "entityidfiltertype": "exact",
    "outputinitially": true,
    "state_type": "str",
    "haltifstate": "",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "outputs": 1,
    "output_only_on_state_change": true,
    "for": "",
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": false,
    "ignorePrevStateUnavailable": false,
    "ignoreCurrentStateUnknown": false,
    "ignoreCurrentStateUnavailable": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 140,
    "y": 280,
    "wires": [
      [
        "d5736355.e4e8e"
      ]
    ]
  },
  {
    "id": "e84b117e.dd59d",
    "type": "server-state-changed",
    "z": "c0da8379.b0dd3",
    "name": "state guest",
    "server": "4ba92433.2478cc",
    "version": 3,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "input_boolean.guest",
    "entityidfiltertype": "exact",
    "outputinitially": false,
    "state_type": "str",
    "haltifstate": "",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "outputs": 1,
    "output_only_on_state_change": true,
    "for": "",
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": false,
    "ignorePrevStateUnavailable": false,
    "ignoreCurrentStateUnknown": false,
    "ignoreCurrentStateUnavailable": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 100,
    "y": 480,
    "wires": [
      [
        "9b83ef6.7af1c1"
      ]
    ]
  },
  {
    "id": "9b83ef6.7af1c1",
    "type": "switch",
    "z": "c0da8379.b0dd3",
    "name": "state guest on off",
    "property": "payload",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "on",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "off",
        "vt": "str"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 370,
    "y": 480,
    "wires": [
      [
        "ed71f712.b69338",
        "9f66d88d.57dad8"
      ],
      [
        "14df4f1.53f71b1"
      ]
    ]
  },
  {
    "id": "1f0643fe.cb32cc",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state frontdoor light on",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "shelly1-front-door",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1420,
    "y": 240,
    "wires": [
      [
        "ca6dfbcc.46ac18"
      ],
      []
    ]
  },
  {
    "id": "d48ea384.8d1d",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state backyard light on",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "shellydimmer-backyard-string-lights",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1420,
    "y": 180,
    "wires": [
      [
        "c29767f.9905c98"
      ],
      []
    ]
  },
  {
    "id": "b86ec736.0cd658",
    "type": "server-state-changed",
    "z": "c0da8379.b0dd3",
    "name": "state person coen home",
    "server": "4ba92433.2478cc",
    "version": 3,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "person.coen",
    "entityidfiltertype": "exact",
    "outputinitially": false,
    "state_type": "str",
    "haltifstate": "home",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "outputs": 2,
    "output_only_on_state_change": true,
    "for": "",
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": true,
    "ignorePrevStateUnavailable": true,
    "ignoreCurrentStateUnknown": true,
    "ignoreCurrentStateUnavailable": true,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 140,
    "y": 560,
    "wires": [
      [
        "c0a73100.b726e"
      ],
      []
    ]
  },
  {
    "id": "f8f2314a.940eb",
    "type": "server-state-changed",
    "z": "c0da8379.b0dd3",
    "name": "state person anne home",
    "server": "4ba92433.2478cc",
    "version": 3,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "person.anne",
    "entityidfiltertype": "exact",
    "outputinitially": false,
    "state_type": "str",
    "haltifstate": "home",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "outputs": 2,
    "output_only_on_state_change": true,
    "for": "",
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": true,
    "ignorePrevStateUnavailable": true,
    "ignoreCurrentStateUnknown": true,
    "ignoreCurrentStateUnavailable": true,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 150,
    "y": 620,
    "wires": [
      [
        "b53f891b.1feb08"
      ],
      []
    ]
  },
  {
    "id": "c0a73100.b726e",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state person anne home",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "home",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "person.anne",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 690,
    "y": 560,
    "wires": [
      [
        "5f497d57.150f44",
        "aab516c6.d5acf8",
        "ed71f712.b69338"
      ],
      []
    ]
  },
  {
    "id": "b53f891b.1feb08",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state person coen home",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "home",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "person.coen",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 690,
    "y": 600,
    "wires": [
      [
        "aab516c6.d5acf8",
        "ed71f712.b69338",
        "5f497d57.150f44"
      ],
      []
    ]
  },
  {
    "id": "ce9cbf76.39de5",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state livingroom light off",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "off",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "light.shelly_shellydimmer_living_room",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "light.shelly_shellydimmer_living_room",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1190,
    "y": 360,
    "wires": [
      [
        "f7dd5719.04dbc8"
      ],
      []
    ]
  },
  {
    "id": "f7dd5719.04dbc8",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn on light livingroom ",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "light",
    "service": "turn_on",
    "entityId": "light.shelly_shellydimmer_living_room",
    "data": "",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1720,
    "y": 280,
    "wires": [
      [
        "b50fb918.44f928"
      ]
    ]
  },
  {
    "id": "c3dc83f5.77118",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state harmony on",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "remote.harmony_hub_01",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "remote.harmony_hub_01",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data_remote.harmony_hub_01",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 670,
    "y": 360,
    "wires": [
      [
        "171a4247.1ffeee"
      ],
      []
    ]
  },
  {
    "id": "171a4247.1ffeee",
    "type": "switch",
    "z": "c0da8379.b0dd3",
    "name": "activity harmony tv/netflix",
    "property": "data_remote.harmony_hub_01.attributes.current_activity",
    "propertyType": "msg",
    "rules": [
      {
        "t": "eq",
        "v": "TV",
        "vt": "str"
      },
      {
        "t": "eq",
        "v": "Netflix",
        "vt": "str"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 950,
    "y": 360,
    "wires": [
      [
        "ce9cbf76.39de5"
      ],
      [
        "ce9cbf76.39de5"
      ]
    ]
  },
  {
    "id": "672a2d68.71e334",
    "type": "ha-get-entities",
    "z": "c0da8379.b0dd3",
    "name": "lookup light on",
    "server": "4ba92433.2478cc",
    "version": 0,
    "rules": [
      {
        "property": "entity_id",
        "logic": "starts_with",
        "value": "light.",
        "valueType": "str"
      },
      {
        "property": "state",
        "logic": "is",
        "value": "on",
        "valueType": "str"
      }
    ],
    "output_type": "split",
    "output_empty_results": false,
    "output_location_type": "msg",
    "output_location": "payload",
    "output_results_count": 1,
    "x": 660,
    "y": 880,
    "wires": [
      [
        "3b133cff.48b2f4"
      ]
    ]
  },
  {
    "id": "2378d0a7.6d963",
    "type": "join",
    "z": "c0da8379.b0dd3",
    "name": "",
    "mode": "custom",
    "build": "string",
    "property": "friendly_name",
    "propertyType": "msg",
    "key": "topic",
    "joiner": ", ",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1130,
    "y": 880,
    "wires": [
      [
        "3b035682.ea7bea"
      ]
    ]
  },
  {
    "id": "3b133cff.48b2f4",
    "type": "template",
    "z": "c0da8379.b0dd3",
    "name": "Format Friendly Name",
    "field": "friendly_name",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "{{payload.attributes.friendly_name}}",
    "output": "str",
    "x": 940,
    "y": 880,
    "wires": [
      [
        "2378d0a7.6d963"
      ]
    ]
  },
  {
    "id": "cea43bad.d11358",
    "type": "template",
    "z": "c0da8379.b0dd3",
    "name": "message",
    "field": "message",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "Het is donker en iemand is aanwezig. {{data.attributes.friendly_name}} verlichting is ingeschakeld.",
    "output": "str",
    "x": 2060,
    "y": 600,
    "wires": [
      [
        "9bfeecdc.f723d"
      ]
    ]
  },
  {
    "id": "9bfeecdc.f723d",
    "type": "link out",
    "z": "c0da8379.b0dd3",
    "name": "",
    "links": [
      "7b0f1685.0279d8"
    ],
    "x": 2255,
    "y": 480,
    "wires": []
  },
  {
    "id": "60ffd46b.e9534c",
    "type": "ha-get-entities",
    "z": "c0da8379.b0dd3",
    "name": "lookup person home",
    "server": "4ba92433.2478cc",
    "version": 0,
    "rules": [
      {
        "property": "entity_id",
        "logic": "starts_with",
        "value": "person.",
        "valueType": "str"
      },
      {
        "property": "state",
        "logic": "is",
        "value": "home",
        "valueType": "str"
      }
    ],
    "output_type": "split",
    "output_empty_results": false,
    "output_location_type": "msg",
    "output_location": "payload",
    "output_results_count": 1,
    "x": 680,
    "y": 740,
    "wires": [
      [
        "6ca20d6c.62d004"
      ]
    ]
  },
  {
    "id": "b9ba0c85.bcd94",
    "type": "join",
    "z": "c0da8379.b0dd3",
    "name": "",
    "mode": "custom",
    "build": "string",
    "property": "friendly_name_person",
    "propertyType": "msg",
    "key": "topic",
    "joiner": ", ",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1130,
    "y": 740,
    "wires": [
      [
        "a5f68bf8.968328"
      ]
    ]
  },
  {
    "id": "6ca20d6c.62d004",
    "type": "template",
    "z": "c0da8379.b0dd3",
    "name": "Format Friendly Name",
    "field": "friendly_name_person",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "{{payload.attributes.friendly_name}}",
    "output": "str",
    "x": 940,
    "y": 740,
    "wires": [
      [
        "b9ba0c85.bcd94"
      ]
    ]
  },
  {
    "id": "da57c41e.c506f8",
    "type": "ha-get-entities",
    "z": "c0da8379.b0dd3",
    "name": "lookup light on",
    "server": "4ba92433.2478cc",
    "version": 0,
    "rules": [
      {
        "property": "entity_id",
        "logic": "starts_with",
        "value": "light.shelly",
        "valueType": "str"
      },
      {
        "property": "state",
        "logic": "is",
        "value": "on",
        "valueType": "str"
      }
    ],
    "output_type": "split",
    "output_empty_results": false,
    "output_location_type": "msg",
    "output_location": "payload",
    "output_results_count": 1,
    "x": 660,
    "y": 800,
    "wires": [
      [
        "fd3c7297.9684e"
      ]
    ]
  },
  {
    "id": "fd3c7297.9684e",
    "type": "template",
    "z": "c0da8379.b0dd3",
    "name": "Format Friendly Name",
    "field": "friendly_name_lampen",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "{{payload.attributes.friendly_name}}",
    "output": "str",
    "x": 940,
    "y": 800,
    "wires": [
      [
        "1928247d.6ddacc"
      ]
    ]
  },
  {
    "id": "1928247d.6ddacc",
    "type": "join",
    "z": "c0da8379.b0dd3",
    "name": "",
    "mode": "custom",
    "build": "string",
    "property": "friendly_name_lampen",
    "propertyType": "msg",
    "key": "topic",
    "joiner": ", ",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1130,
    "y": 800,
    "wires": [
      [
        "d129b86a.aa0f58"
      ]
    ]
  },
  {
    "id": "d129b86a.aa0f58",
    "type": "template",
    "z": "c0da8379.b0dd3",
    "name": "message",
    "field": "message",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "{{friendly_name_person}} is thuis gekomen en het is dark. {{friendly_name_lampen}} verlichting is ingeschakeld",
    "output": "str",
    "x": 2060,
    "y": 800,
    "wires": [
      [
        "9bfeecdc.f723d"
      ]
    ]
  },
  {
    "id": "efdb1a4f.c5e9b8",
    "type": "template",
    "z": "c0da8379.b0dd3",
    "name": "message",
    "field": "message",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "{{data.attributes.friendly_name}} verlichting is automatisch uitgeschakeld",
    "output": "str",
    "x": 2060,
    "y": 80,
    "wires": [
      [
        "9bfeecdc.f723d"
      ]
    ]
  },
  {
    "id": "b50fb918.44f928",
    "type": "template",
    "z": "c0da8379.b0dd3",
    "name": "message",
    "field": "message",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "{{data.attributes.friendly_name}} verlichting is ingeschakeld omdat Harmony activiteit {{data_remote.harmony_hub_01.attributes.current_activity}} actief is. ",
    "output": "str",
    "x": 2060,
    "y": 360,
    "wires": [
      [
        "9bfeecdc.f723d"
      ]
    ]
  },
  {
    "id": "23da98f2.f85338",
    "type": "inject",
    "z": "c0da8379.b0dd3",
    "name": "06:30 'on' payload",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "30 06 * * 1,2,3,4,5",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "on",
    "payloadType": "str",
    "x": 130,
    "y": 120,
    "wires": [
      [
        "298ec9d5.35e576",
        "9c489e3f.49b89",
        "2175515c.be3ebe"
      ]
    ]
  },
  {
    "id": "e07b8aed.7d4548",
    "type": "inject",
    "z": "c0da8379.b0dd3",
    "name": "07:00 'on' payload",
    "props": [
      {
        "p": "payload"
      },
      {
        "p": "topic",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "00 07 * * 6,0",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "payload": "on",
    "payloadType": "str",
    "x": 130,
    "y": 60,
    "wires": [
      [
        "298ec9d5.35e576",
        "9c489e3f.49b89",
        "2175515c.be3ebe"
      ]
    ]
  },
  {
    "id": "298ec9d5.35e576",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state persons home",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "home",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "group.persons",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 670,
    "y": 60,
    "wires": [
      [
        "aab516c6.d5acf8",
        "ed71f712.b69338",
        "6a1e682.ce28098"
      ],
      []
    ]
  },
  {
    "id": "aab516c6.d5acf8",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state sleep_mode on",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.sleep_mode",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1180,
    "y": 60,
    "wires": [
      [
        "f86b599d.352918"
      ],
      []
    ]
  },
  {
    "id": "9c489e3f.49b89",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state guest on",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.guest",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 660,
    "y": 120,
    "wires": [
      [
        "aab516c6.d5acf8",
        "ed71f712.b69338",
        "6a1e682.ce28098"
      ],
      []
    ]
  },
  {
    "id": "f86b599d.352918",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn off sleep mode",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "input_boolean",
    "service": "turn_off",
    "entityId": "input_boolean.sleep_mode",
    "data": "",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1710,
    "y": 40,
    "wires": [
      [
        "1ae2e15a.a292cf"
      ]
    ]
  },
  {
    "id": "ed71f712.b69338",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state home_security on",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.home_security",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1190,
    "y": 120,
    "wires": [
      [
        "1902dc19.17ed64"
      ],
      []
    ]
  },
  {
    "id": "1902dc19.17ed64",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn off home security",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "input_boolean",
    "service": "turn_off",
    "entityId": "input_boolean.home_security",
    "data": "",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1720,
    "y": 100,
    "wires": [
      [
        "1ae2e15a.a292cf"
      ]
    ]
  },
  {
    "id": "5f497d57.150f44",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state outdoor dark",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "dark",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "sensor.outdoor_light_dark",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 930,
    "y": 580,
    "wires": [
      [
        "bfdc7b40.f9a528"
      ],
      []
    ]
  },
  {
    "id": "6a1e682.ce28098",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state outdoor light",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "light",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "sensor.outdoor_light_dark",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1170,
    "y": 180,
    "wires": [
      [
        "d48ea384.8d1d",
        "1f0643fe.cb32cc"
      ],
      []
    ]
  },
  {
    "id": "a5f68bf8.968328",
    "type": "delay",
    "z": "c0da8379.b0dd3",
    "name": "",
    "pauseType": "delay",
    "timeout": "5",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "x": 1380,
    "y": 740,
    "wires": [
      [
        "da57c41e.c506f8"
      ]
    ]
  },
  {
    "id": "13ca8b62.27a4a5",
    "type": "join",
    "z": "c0da8379.b0dd3",
    "name": "",
    "mode": "custom",
    "build": "string",
    "property": "data.attributes.friendly_name",
    "propertyType": "msg",
    "key": "topic",
    "joiner": ", ",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "5",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "num",
    "reduceFixup": "",
    "x": 1910,
    "y": 600,
    "wires": [
      [
        "cea43bad.d11358"
      ]
    ]
  },
  {
    "id": "1ae2e15a.a292cf",
    "type": "join",
    "z": "c0da8379.b0dd3",
    "name": "",
    "mode": "custom",
    "build": "string",
    "property": "data.attributes.friendly_name",
    "propertyType": "msg",
    "key": "topic",
    "joiner": ", ",
    "joinerType": "str",
    "accumulate": false,
    "timeout": "5",
    "count": "",
    "reduceRight": false,
    "reduceExp": "",
    "reduceInit": "",
    "reduceInitType": "",
    "reduceFixup": "",
    "x": 1910,
    "y": 80,
    "wires": [
      [
        "efdb1a4f.c5e9b8"
      ]
    ]
  },
  {
    "id": "a8a31543.6e54b8",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state livingroom light off",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "off",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "light.shelly_shellydimmer_living_room",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1430,
    "y": 680,
    "wires": [
      [
        "fd5eca9e.417048"
      ],
      []
    ]
  },
  {
    "id": "fd5eca9e.417048",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn off light livingroom",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "light",
    "service": "turn_on",
    "entityId": "light.shelly_shellydimmer_living_room",
    "data": "{\"brightness\":80}",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1720,
    "y": 680,
    "wires": [
      [
        "13ca8b62.27a4a5"
      ]
    ]
  },
  {
    "id": "d1463709.a63de8",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state guest on",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "on",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.guest",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1160,
    "y": 500,
    "wires": [
      [
        "d08ebe33.48973",
        "cc18abb3.ae2a18"
      ],
      []
    ]
  },
  {
    "id": "ab57e30e.f2b96",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state group persons home",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "home",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "group.persons",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 1190,
    "y": 440,
    "wires": [
      [
        "d08ebe33.48973",
        "cc18abb3.ae2a18"
      ],
      []
    ]
  },
  {
    "id": "3b035682.ea7bea",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn off light all",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "light",
    "service": "turn_off",
    "entityId": "{{payload.entity_id}}",
    "data": "",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1700,
    "y": 880,
    "wires": [
      [
        "afd68a7f.551918"
      ]
    ]
  },
  {
    "id": "afd68a7f.551918",
    "type": "template",
    "z": "c0da8379.b0dd3",
    "name": "message",
    "field": "message",
    "fieldType": "msg",
    "format": "handlebars",
    "syntax": "mustache",
    "template": "Niemand is aanwezig. {{payload.attributes.friendly_name}} verlichting stond nog aan en is automatisch uitgeschakeld.",
    "output": "str",
    "x": 2060,
    "y": 880,
    "wires": [
      [
        "9bfeecdc.f723d"
      ]
    ]
  },
  {
    "id": "d6b1e084.f23a9",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state guest off",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "off",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.guest",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 360,
    "y": 840,
    "wires": [
      [
        "672a2d68.71e334"
      ],
      []
    ]
  },
  {
    "id": "14df4f1.53f71b1",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state persons not_home",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "not_home",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "group.persons",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 390,
    "y": 880,
    "wires": [
      [
        "672a2d68.71e334"
      ],
      []
    ]
  },
  {
    "id": "5907771e.9d09a8",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "set theme light",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "frontend",
    "service": "set_theme",
    "entityId": "",
    "data": "{ \"name\": \"light_theme\" }",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "data"
      }
    ],
    "queue": "none",
    "x": 660,
    "y": 200,
    "wires": [
      []
    ]
  },
  {
    "id": "1d2f1c8b.ae3783",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "set theme dark",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "frontend",
    "service": "set_theme",
    "entityId": "",
    "data": "{\"name\":\"dark_theme\"}",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "data"
      }
    ],
    "queue": "none",
    "x": 660,
    "y": 260,
    "wires": [
      []
    ]
  },
  {
    "id": "255f30c3.c9935",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state sleep mode off",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 2,
    "halt_if": "off",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "input_boolean.sleep_mode",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 680,
    "y": 460,
    "wires": [
      [
        "ab57e30e.f2b96",
        "d1463709.a63de8"
      ],
      []
    ]
  },
  {
    "id": "bfdc7b40.f9a528",
    "type": "delay",
    "z": "c0da8379.b0dd3",
    "name": "",
    "pauseType": "delay",
    "timeout": "15",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "x": 1140,
    "y": 580,
    "wires": [
      [
        "d08ebe33.48973",
        "cc18abb3.ae2a18",
        "a8a31543.6e54b8"
      ]
    ]
  },
  {
    "id": "2175515c.be3ebe",
    "type": "api-current-state",
    "z": "c0da8379.b0dd3",
    "name": "state outdoor light dark",
    "server": "4ba92433.2478cc",
    "version": 2,
    "outputs": 1,
    "halt_if": "",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "sensor.outdoor_light_dark",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "x": 380,
    "y": 140,
    "wires": [
      [
        "d5736355.e4e8e"
      ]
    ]
  },
  {
    "id": "b7ae8452.581398",
    "type": "delay",
    "z": "c0da8379.b0dd3",
    "name": "",
    "pauseType": "delay",
    "timeout": "1",
    "timeoutUnits": "seconds",
    "rate": "1",
    "nbRateUnits": "1",
    "rateUnits": "second",
    "randomFirst": "1",
    "randomLast": "5",
    "randomUnits": "seconds",
    "drop": false,
    "x": 340,
    "y": 340,
    "wires": [
      [
        "255f30c3.c9935"
      ]
    ]
  },
  {
    "id": "9f66d88d.57dad8",
    "type": "api-call-service",
    "z": "c0da8379.b0dd3",
    "name": "turn on water heater",
    "server": "4ba92433.2478cc",
    "version": 3,
    "debugenabled": false,
    "service_domain": "water_heater",
    "service": "set_temperature",
    "entityId": "water_heater.warm_water",
    "data": "{\"temperature\":\"61\"}",
    "dataType": "json",
    "mergecontext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1720,
    "y": 340,
    "wires": [
      []
    ]
  }
]