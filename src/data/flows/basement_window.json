[
    {
        "id": "b1a9214c.4c71c",
        "type": "tab",
        "label": "basement_window",
        "disabled": false,
        "info": ""
    },
    {
        "id": "968aec4f.db7b8",
        "type": "comment",
        "z": "b1a9214c.4c71c",
        "name": "basement window",
        "info": "",
        "x": 110,
        "y": 40,
        "wires": []
    },
    {
        "id": "8469a147.10964",
        "type": "server-state-changed",
        "z": "b1a9214c.4c71c",
        "name": "state buienradar precipitation > 0",
        "server": "4ba92433.2478cc",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.buienradar_precipitation",
        "entityIdType": "exact",
        "outputInitially": true,
        "stateType": "num",
        "ifState": "0",
        "ifStateType": "num",
        "ifStateOperator": "gt",
        "outputOnlyOnStateChange": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "sensor.buienradar_precipitation",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 200,
        "wires": [
            [
                "c431f228.97084"
            ],
            [
                "6692dae9.7caa84"
            ]
        ]
    },
    {
        "id": "6692dae9.7caa84",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state absolute humidity basement",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "num",
        "halt_if_compare": "is",
        "entity_id": "sensor.basement_thermal_comfort_absolute_humidity",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "sensor.basement_thermal_comfort_absolute_humidity",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 500,
        "y": 300,
        "wires": [
            [
                "1c1129d.09d62d6"
            ]
        ]
    },
    {
        "id": "c0684245.6628d",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state absolute humidity outdoor > absolute humidity basement",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "sensor.basement_thermal_comfort_absolute_humidity",
        "halt_if_type": "msg",
        "halt_if_compare": "gt",
        "entity_id": "sensor.outdoor_thermal_comfort_absolute_humidity",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "sensor.outdoor_thermal_comfort_absolute_humidity",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 870,
        "y": 360,
        "wires": [
            [
                "98a47a1b.d6fcc8"
            ],
            [
                "fef0521b.1d64e"
            ]
        ]
    },
    {
        "id": "7adaadb8.c5f204",
        "type": "inject",
        "z": "b1a9214c.4c71c",
        "name": "start_flow",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "start_flow",
        "payloadType": "str",
        "x": 110,
        "y": 300,
        "wires": [
            [
                "6692dae9.7caa84"
            ]
        ]
    },
    {
        "id": "6822779.5aa9588",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state temperature outdoor > temperature basement",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "sensor.basement_temperature",
        "halt_if_type": "msg",
        "halt_if_compare": "gt",
        "entity_id": "sensor.buienradar_temperature",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "sensor.buienradar_temperature",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 550,
        "y": 600,
        "wires": [
            [
                "1991431c.890dcd"
            ],
            [
                "6f49345.883a1cc"
            ]
        ]
    },
    {
        "id": "b5938ee.f7bec7",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "Basement Heating Power <= 0%",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "0",
        "halt_if_type": "num",
        "halt_if_compare": "lte",
        "entity_id": "sensor.basement_heating",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "sensor.basement_heating",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 490,
        "y": 540,
        "wires": [
            [
                "6822779.5aa9588"
            ],
            []
        ]
    },
    {
        "id": "f82739ec.0019e8",
        "type": "server-state-changed",
        "z": "b1a9214c.4c71c",
        "name": "state heating power basement > 1%",
        "server": "4ba92433.2478cc",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.basement_heating",
        "entityIdType": "exact",
        "outputInitially": true,
        "stateType": "num",
        "ifState": "1",
        "ifStateType": "num",
        "ifStateOperator": "gt",
        "outputOnlyOnStateChange": true,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "sensor.basement_heating",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 80,
        "wires": [
            [
                "8c82a32b.762e7"
            ],
            [
                "6692dae9.7caa84"
            ]
        ]
    },
    {
        "id": "fef0521b.1d64e",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state precipitation buienradar <= 0",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "0",
        "halt_if_type": "num",
        "halt_if_compare": "lte",
        "entity_id": "sensor.buienradar_precipitation",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "sensor.ede_precipitation",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 500,
        "y": 420,
        "wires": [
            [
                "5be90bde.fa4314"
            ],
            []
        ]
    },
    {
        "id": "ee13c1d1.9b3f2",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state basement window off",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.basement_window",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "input_boolean.basement_ramen",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1440,
        "y": 640,
        "wires": [
            [
                "23480068.33efc"
            ],
            []
        ]
    },
    {
        "id": "23480068.33efc",
        "type": "api-call-service",
        "z": "b1a9214c.4c71c",
        "name": "turn on basement window",
        "server": "4ba92433.2478cc",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.basement_ramen"
        ],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "basementraam",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "x": 1690,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "704b917a.b0214",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state basement window on",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.basement_window",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "input_boolean.basement_ramen",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1440,
        "y": 360,
        "wires": [
            [
                "d4f8c710.220648"
            ],
            []
        ]
    },
    {
        "id": "d4f8c710.220648",
        "type": "api-call-service",
        "z": "b1a9214c.4c71c",
        "name": "turn off basement window",
        "server": "4ba92433.2478cc",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.basement_window"
        ],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "basementraam",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "x": 1690,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "6f49345.883a1cc",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state temperature outdoor > 18",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "18",
        "halt_if_type": "num",
        "halt_if_compare": "gt",
        "entity_id": "sensor.buienradar_temperature",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "sensor.buienradar_temperature",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 490,
        "y": 660,
        "wires": [
            [
                "1991431c.890dcd"
            ],
            []
        ]
    },
    {
        "id": "b236d4c0.c39c38",
        "type": "server-state-changed",
        "z": "b1a9214c.4c71c",
        "name": "state buienradar condition rainy",
        "server": "4ba92433.2478cc",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.buienradar_condition",
        "entityIdType": "exact",
        "outputInitially": true,
        "stateType": "str",
        "ifState": "rainy",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "weather.buienradar",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 140,
        "wires": [
            [
                "8bf50cc4.c9593"
            ],
            [
                "6692dae9.7caa84"
            ]
        ]
    },
    {
        "id": "5be90bde.fa4314",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state condidtion buienrader not rainy",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "rainy",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "sensor.buienradar_condition",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "sensor.ede_precipitation",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 510,
        "y": 480,
        "wires": [
            [
                "b5938ee.f7bec7"
            ],
            []
        ]
    },
    {
        "id": "8bf50cc4.c9593",
        "type": "template",
        "z": "b1a9214c.4c71c",
        "name": "",
        "field": "message",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Sluit de ramen in de kelder het gaat mogelijke regenen.",
        "output": "str",
        "x": 1200,
        "y": 140,
        "wires": [
            [
                "704b917a.b0214",
                "d52f067ae45b546a"
            ]
        ]
    },
    {
        "id": "c431f228.97084",
        "type": "template",
        "z": "b1a9214c.4c71c",
        "name": "",
        "field": "message",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Sluit de ramen in de kelder, dit uur gaat het {{payload}} mm regenen.",
        "output": "str",
        "x": 1200,
        "y": 200,
        "wires": [
            [
                "704b917a.b0214",
                "d52f067ae45b546a"
            ]
        ]
    },
    {
        "id": "1c1129d.09d62d6",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state basement temperature",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "num",
        "halt_if_compare": "is",
        "entity_id": "sensor.basement_temperature",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "sensor.basement_temperature",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 780,
        "y": 300,
        "wires": [
            [
                "18c2e5bb.4c0cfa"
            ]
        ]
    },
    {
        "id": "18c2e5bb.4c0cfa",
        "type": "api-current-state",
        "z": "b1a9214c.4c71c",
        "name": "state buienradar temperature",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "num",
        "halt_if_compare": "is",
        "entity_id": "sensor.buienradar_temperature",
        "state_type": "num",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "sensor.buienradar_temperature",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 480,
        "y": 360,
        "wires": [
            [
                "c0684245.6628d"
            ]
        ]
    },
    {
        "id": "8c82a32b.762e7",
        "type": "template",
        "z": "b1a9214c.4c71c",
        "name": "message",
        "field": "message",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Sluit de ramen, de verwarming in de kelder staat aan. \\n \\nKelder Heating Power is {{sensor.basement_heating}} %",
        "output": "str",
        "x": 1200,
        "y": 80,
        "wires": [
            [
                "704b917a.b0214",
                "d52f067ae45b546a"
            ]
        ]
    },
    {
        "id": "1991431c.890dcd",
        "type": "template",
        "z": "b1a9214c.4c71c",
        "name": "message",
        "field": "message",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Open de ramen in de kelder, buiten is de vochtinhoud:droplet: lager en de temperatuur:thermometer: hoger. \\n\\n*Buiten* \\nTemperatuur: {{sensor.buienradar_temperature}} °C \\nAbsolute vochtinhoud: {{sensor.outdoor_thermal_comfort_absolute_humidity}} g/m³ \\n\\n*Kelder* \\nTemperatuur: {{sensor.basement_temperature}} °C \\nAbsolute vochtinhoud: {{sensor.basement_thermal_comfort_absolute_humidity}} g/m³",
        "output": "str",
        "x": 1200,
        "y": 640,
        "wires": [
            [
                "ee13c1d1.9b3f2",
                "d52f067ae45b546a"
            ]
        ]
    },
    {
        "id": "98a47a1b.d6fcc8",
        "type": "template",
        "z": "b1a9214c.4c71c",
        "name": "message",
        "field": "message",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Sluit de ramen in de kelder, buiten is de vochtinhoud:droplet: hoger of de temperatuur:thermometer: lager. \\n\\n*Buiten* \\nTemperatuur: {{sensor.buienradar_temperature}} °C \\nAbsolute vochtinhoud: {{sensor.outdoor_thermal_comfort_absolute_humidity}} g/m³ \\n\\n*Kelder* \\nTemperatuur: {{sensor.basement_temperature}} °C \\nAbsolute vochtinhoud: {{sensor.basement_thermal_comfort_absolute_humidity}} g/m³",
        "output": "str",
        "x": 1200,
        "y": 360,
        "wires": [
            [
                "704b917a.b0214",
                "d52f067ae45b546a"
            ]
        ]
    },
    {
        "id": "937da8f1b0f1d4de",
        "type": "api-call-service",
        "z": "b1a9214c.4c71c",
        "name": "slack message",
        "server": "4ba92433.2478cc",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "theautomation",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\":\"Ventilatie\",\"target\":\"#home-assistant\",\"title\":\"Ventilatie\",\"data\":{\"blocks\":[{\"type\":\"header\",\"text\":{\"type\":\"plain_text\",\"text\":\"Ventilatie :dash:\"}},{\"type\":\"section\",\"fields\":[{\"type\":\"mrkdwn\",\"text\":\"{{{message}}}\"}]}]}}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1540,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "d52f067ae45b546a",
        "type": "rbe",
        "z": "b1a9214c.4c71c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 1390,
        "y": 140,
        "wires": [
            [
                "937da8f1b0f1d4de"
            ]
        ]
    },
    {
        "id": "4ba92433.2478cc",
        "type": "server",
        "name": "Home Assistant",
        "version": 5,
        "addon": false,
        "rejectUnauthorizedCerts": false,
        "ha_boolean": "y|yes|true|on|home|open",
        "connectionDelay": true,
        "cacheJson": true,
        "heartbeat": true,
        "heartbeatInterval": "30",
        "areaSelector": "id",
        "deviceSelector": "id",
        "entitySelector": "id",
        "statusSeparator": "at: ",
        "statusYear": "hidden",
        "statusMonth": "short",
        "statusDay": "numeric",
        "statusHourCycle": "h23",
        "statusTimeFormat": "h:m",
        "enableGlobalContextStore": true
    }
]