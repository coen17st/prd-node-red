[
  {
    "id": "9605dd85.f395a",
    "type": "tab",
    "label": "calendar_events_development",
    "disabled": true,
    "info": ""
  },
  {
    "id": "785845af.a1799c",
    "type": "server-state-changed",
    "z": "9605dd85.f395a",
    "name": "calendar prompt7",
    "server": "4ba92433.2478cc",
    "version": 4,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "calendar.prompt7",
    "entityidfiltertype": "exact",
    "outputinitially": true,
    "state_type": "str",
    "haltifstate": "",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "outputs": 1,
    "output_only_on_state_change": true,
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": true,
    "ignorePrevStateUnavailable": true,
    "ignoreCurrentStateUnknown": true,
    "ignoreCurrentStateUnavailable": true,
    "outputProperties": [
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      }
    ],
    "x": 100,
    "y": 100,
    "wires": [
      [
        "377073a9.cc38cc"
      ]
    ]
  },
  {
    "id": "377073a9.cc38cc",
    "type": "function",
    "z": "9605dd85.f395a",
    "name": "check word in message",
    "func": "// Written by Coen Stam\n\n// Check if new state contains word\nvar string = msg.data.new_state.attributes.message;\nvar word = \"DEVELOPMENT\";\n\n// If new state contains word return msg\nif (string.includes(word))\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "x": 310,
    "y": 100,
    "wires": [
      [
        "cf80420b.1f783"
      ]
    ]
  },
  {
    "id": "cf80420b.1f783",
    "type": "function",
    "z": "9605dd85.f395a",
    "name": "set start time",
    "func": "// Written by Coen Stam\n\n// Create time from start_time attribute\nmsg.payload = {};\nmsg.payload.ontime = msg.data.new_state.attributes.start_time.substr(11, 5);\nreturn msg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "x": 510,
    "y": 100,
    "wires": [
      [
        "6ad4cba8.7d5a14"
      ]
    ]
  },
  {
    "id": "e9171ff7.af43b",
    "type": "api-call-service",
    "z": "9605dd85.f395a",
    "name": "set temperature climate basement",
    "server": "4ba92433.2478cc",
    "version": 5,
    "debugenabled": false,
    "domain": "climate",
    "service": "set_temperature",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "climate.basement"
    ],
    "data": "{\"hvac_mode\":\"heat\",\"temperature\":19}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 1140,
    "y": 100,
    "wires": [
      []
    ]
  },
  {
    "id": "2c83e3ef.9f7cac",
    "type": "comment",
    "z": "9605dd85.f395a",
    "name": "turn on basement heating when calendar event contains \"development\" and coen is home. When state person.coen changed to not_home heating will go to auto mode",
    "info": "turn on basement heating when calendar event contains \"development\" and coen is home. When state person.coen changed to not_home heating will go to auto mode",
    "x": 570,
    "y": 40,
    "wires": []
  },
  {
    "id": "2bbaf616.ec124a",
    "type": "api-current-state",
    "z": "9605dd85.f395a",
    "name": "person coen is home",
    "server": "4ba92433.2478cc",
    "version": 3,
    "outputs": 2,
    "halt_if": "home",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "person.coen",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "override_topic": false,
    "state_location": "payload",
    "override_payload": "msg",
    "entity_location": "data",
    "override_data": "msg",
    "x": 880,
    "y": 100,
    "wires": [
      [
        "e9171ff7.af43b"
      ],
      []
    ]
  },
  {
    "id": "aedcd937.1ca508",
    "type": "server-state-changed",
    "z": "9605dd85.f395a",
    "name": "person coen is not home",
    "server": "4ba92433.2478cc",
    "version": 4,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "person.coen",
    "entityidfiltertype": "exact",
    "outputinitially": true,
    "state_type": "str",
    "haltifstate": "home",
    "halt_if_type": "str",
    "halt_if_compare": "is_not",
    "outputs": 2,
    "output_only_on_state_change": true,
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": true,
    "ignorePrevStateUnavailable": true,
    "ignoreCurrentStateUnknown": true,
    "ignoreCurrentStateUnavailable": true,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 130,
    "y": 160,
    "wires": [
      [
        "a2e5ff99.41b23"
      ],
      []
    ]
  },
  {
    "id": "a2894712.f96908",
    "type": "function",
    "z": "9605dd85.f395a",
    "name": "check word in message",
    "func": "// Written by Coen Stam\n\n// Check if new state contains word\nvar string = msg.data.attributes.message;\nvar word = \"DEVELOPMENT\";\n\n// If new state contains word return msg\nif (string.includes(word))\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "x": 550,
    "y": 160,
    "wires": [
      [
        "1a80c797.424038"
      ]
    ]
  },
  {
    "id": "a2e5ff99.41b23",
    "type": "api-current-state",
    "z": "9605dd85.f395a",
    "name": "calendar state",
    "server": "4ba92433.2478cc",
    "version": 3,
    "outputs": 1,
    "halt_if": "",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "entity_id": "calendar.prompt7",
    "state_type": "str",
    "blockInputOverrides": false,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "entity"
      }
    ],
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "override_topic": false,
    "state_location": "payload",
    "override_payload": "msg",
    "entity_location": "data",
    "override_data": "msg",
    "x": 340,
    "y": 160,
    "wires": [
      [
        "a2894712.f96908"
      ]
    ]
  },
  {
    "id": "1a80c797.424038",
    "type": "api-call-service",
    "z": "9605dd85.f395a",
    "name": "set temperature climate basement",
    "server": "4ba92433.2478cc",
    "version": 5,
    "debugenabled": false,
    "domain": "climate",
    "service": "set_hvac_mode",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "climate.basement"
    ],
    "data": "{\"hvac_mode\":\"auto\"}",
    "dataType": "json",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 920,
    "y": 160,
    "wires": [
      []
    ]
  },
  {
    "id": "6ad4cba8.7d5a14",
    "type": "schedex",
    "z": "9605dd85.f395a",
    "name": "schedule",
    "passthroughunhandled": false,
    "suspended": false,
    "lat": "",
    "lon": "",
    "ontime": "",
    "ontopic": "",
    "onpayload": "",
    "onoffset": "",
    "onrandomoffset": 0,
    "offtime": "",
    "offtopic": "",
    "offpayload": "",
    "offoffset": 0,
    "offrandomoffset": 0,
    "mon": true,
    "tue": true,
    "wed": true,
    "thu": true,
    "fri": true,
    "sat": true,
    "sun": true,
    "x": 680,
    "y": 100,
    "wires": [
      [
        "2bbaf616.ec124a"
      ]
    ]
  }
]