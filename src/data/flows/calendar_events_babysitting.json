[
  {
    "id": "2751da37.549936",
    "type": "tab",
    "label": "calendar_events_babysitting",
    "disabled": false,
    "info": ""
  },
  {
    "id": "7f384e9c.a03be",
    "type": "api-call-service",
    "z": "2751da37.549936",
    "name": "turn on guest mode",
    "server": "4ba92433.2478cc",
    "version": 5,
    "debugenabled": false,
    "domain": "input_boolean",
    "service": "turn_on",
    "areaId": [],
    "deviceId": [],
    "entityId": [
      "input_boolean.guest"
    ],
    "data": "",
    "dataType": "jsonata",
    "mergeContext": "",
    "mustacheAltTags": false,
    "outputProperties": [],
    "queue": "none",
    "x": 870,
    "y": 100,
    "wires": [
      []
    ]
  },
  {
    "id": "71978835.1dc428",
    "type": "function",
    "z": "2751da37.549936",
    "name": "set start time",
    "func": "// Written by Coen Stam\n\n// Create time from start_time attribute\nmsg.payload = {};\nmsg.payload.ontime = msg.data.new_state.attributes.start_time.substr(11, 5);\nreturn msg;\n",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "x": 490,
    "y": 100,
    "wires": [
      [
        "14e85e99.eee3d1"
      ]
    ]
  },
  {
    "id": "c033dd4a.d83ea",
    "type": "function",
    "z": "2751da37.549936",
    "name": "check word in message",
    "func": "// Written by Coen Stam\n\n// Check if new state contains word\nvar string = msg.data.new_state.attributes.message;\nvar word = \"past op\";\n\n// If new state contains word return msg\nif (string.includes(word))\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "x": 290,
    "y": 100,
    "wires": [
      [
        "71978835.1dc428"
      ]
    ]
  },
  {
    "id": "64bd05aa.cd535c",
    "type": "server-state-changed",
    "z": "2751da37.549936",
    "name": "calendar lise",
    "server": "4ba92433.2478cc",
    "version": 4,
    "exposeToHomeAssistant": false,
    "haConfig": [
      {
        "property": "name",
        "value": ""
      },
      {
        "property": "icon",
        "value": ""
      }
    ],
    "entityidfilter": "calendar.lise",
    "entityidfiltertype": "exact",
    "outputinitially": true,
    "state_type": "str",
    "haltifstate": "",
    "halt_if_type": "str",
    "halt_if_compare": "is",
    "outputs": 1,
    "output_only_on_state_change": false,
    "for": 0,
    "forType": "num",
    "forUnits": "minutes",
    "ignorePrevStateNull": false,
    "ignorePrevStateUnknown": true,
    "ignorePrevStateUnavailable": true,
    "ignoreCurrentStateUnknown": true,
    "ignoreCurrentStateUnavailable": true,
    "outputProperties": [
      {
        "property": "payload",
        "propertyType": "msg",
        "value": "",
        "valueType": "entityState"
      },
      {
        "property": "data",
        "propertyType": "msg",
        "value": "",
        "valueType": "eventData"
      },
      {
        "property": "topic",
        "propertyType": "msg",
        "value": "",
        "valueType": "triggerId"
      }
    ],
    "x": 90,
    "y": 100,
    "wires": [
      [
        "c033dd4a.d83ea"
      ]
    ]
  },
  {
    "id": "c01434c9.7568a8",
    "type": "comment",
    "z": "2751da37.549936",
    "name": "set guest mode to on when calendar event contains\"past op\" ",
    "info": "set guest mode to on when calendar event contains\"past op\" ",
    "x": 240,
    "y": 40,
    "wires": []
  },
  {
    "id": "14e85e99.eee3d1",
    "type": "schedex",
    "z": "2751da37.549936",
    "name": "schedule -90 min",
    "passthroughunhandled": false,
    "suspended": false,
    "lat": "",
    "lon": "",
    "ontime": "",
    "ontopic": "",
    "onpayload": "",
    "onoffset": "-90",
    "onrandomoffset": 0,
    "offtime": "",
    "offtopic": "",
    "offpayload": "",
    "offoffset": 0,
    "offrandomoffset": 0,
    "mon": true,
    "tue": true,
    "wed": true,
    "thu": true,
    "fri": true,
    "sat": true,
    "sun": true,
    "x": 670,
    "y": 100,
    "wires": [
      [
        "7f384e9c.a03be"
      ]
    ]
  }
]