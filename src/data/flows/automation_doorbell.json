[
    {
        "id": "3637eeb0.d96232",
        "type": "tab",
        "label": "automation_doorbell",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b189508993904947",
        "type": "group",
        "z": "3637eeb0.d96232",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "ca96ab2b5ee83be0",
            "1817757d44df9ab3",
            "d9c305f5d3a90eeb",
            "4b5032dba0ee7717",
            "ac9e1209773b9b26"
        ],
        "x": 14,
        "y": 39,
        "w": 682,
        "h": 82
    },
    {
        "id": "aa8eb1c4.30d7e",
        "type": "server-state-changed",
        "z": "3637eeb0.d96232",
        "name": "state doorbell button on",
        "server": "4ba92433.2478cc",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.smart_doorbell_button"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 320,
        "wires": [
            [
                "f98986e3.e78848",
                "11f67152.16638f"
            ],
            []
        ]
    },
    {
        "id": "bff3378b.fb3928",
        "type": "server-state-changed",
        "z": "3637eeb0.d96232",
        "name": "state persons not home",
        "server": "4ba92433.2478cc",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "group.persons"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": true,
        "stateType": "str",
        "ifState": "not_home",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 200,
        "wires": [
            [
                "59bbde6d.37f02"
            ],
            []
        ]
    },
    {
        "id": "59bbde6d.37f02",
        "type": "api-current-state",
        "z": "3637eeb0.d96232",
        "name": "state doorbell off",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.smart_doorbell_active",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 340,
        "y": 200,
        "wires": [
            [
                "d1c2946f.425ad8"
            ],
            []
        ]
    },
    {
        "id": "d1c2946f.425ad8",
        "type": "api-call-service",
        "z": "3637eeb0.d96232",
        "name": "turn on doorbell chime",
        "server": "4ba92433.2478cc",
        "version": 6,
        "debugenabled": false,
        "action": "switch.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.smart_doorbell_active"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "domain": "switch",
        "service": "turn_on",
        "x": 540,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "f98986e3.e78848",
        "type": "api-current-state",
        "z": "3637eeb0.d96232",
        "name": "universal tv is playing",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "media_player.universal_tv",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 360,
        "y": 320,
        "wires": [
            [
                "c63cd5dd.2969b8"
            ],
            []
        ]
    },
    {
        "id": "c63cd5dd.2969b8",
        "type": "api-call-service",
        "z": "3637eeb0.d96232",
        "name": "pause media player",
        "server": "4ba92433.2478cc",
        "version": 6,
        "debugenabled": false,
        "action": "media_player.media_pause",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.universal_tv"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "domain": "media_player",
        "service": "media_pause",
        "x": 570,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "11f67152.16638f",
        "type": "api-current-state",
        "z": "3637eeb0.d96232",
        "name": "state outdoor dark",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "dark",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.outdoor_light_dark",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 350,
        "y": 380,
        "wires": [
            [
                "d6c8ef4a.6f6e9"
            ],
            []
        ]
    },
    {
        "id": "c3f4b74d.a01278",
        "type": "api-call-service",
        "z": "3637eeb0.d96232",
        "name": "turn on light front door",
        "server": "4ba92433.2478cc",
        "version": 6,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly1_front_door"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "domain": "light",
        "service": "turn_on",
        "x": 780,
        "y": 380,
        "wires": [
            [
                "f39e3558.7e0a48"
            ]
        ]
    },
    {
        "id": "d6c8ef4a.6f6e9",
        "type": "api-current-state",
        "z": "3637eeb0.d96232",
        "name": "state light front door off",
        "server": "4ba92433.2478cc",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.shelly1_front_door",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 560,
        "y": 380,
        "wires": [
            [
                "c3f4b74d.a01278"
            ],
            []
        ]
    },
    {
        "id": "4566a0c1.1b69e",
        "type": "api-call-service",
        "z": "3637eeb0.d96232",
        "name": "turn off light front door",
        "server": "4ba92433.2478cc",
        "version": 6,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly1_front_door"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "domain": "light",
        "service": "turn_off",
        "x": 1180,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "f39e3558.7e0a48",
        "type": "stoptimer",
        "z": "3637eeb0.d96232",
        "duration": "10",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "",
        "x": 980,
        "y": 380,
        "wires": [
            [
                "4566a0c1.1b69e"
            ],
            []
        ]
    },
    {
        "id": "cc76e29e.b681",
        "type": "comment",
        "z": "3637eeb0.d96232",
        "name": "doorbell automation",
        "info": "",
        "x": 110,
        "y": 20,
        "wires": []
    },
    {
        "id": "8ff03866527469c8",
        "type": "comment",
        "z": "3637eeb0.d96232",
        "name": "turn on the doorbell chime when persons is not_home",
        "info": "doorbell automation",
        "x": 240,
        "y": 160,
        "wires": []
    },
    {
        "id": "954ad4f4b59286e0",
        "type": "comment",
        "z": "3637eeb0.d96232",
        "name": "actions when doorbell button is pressed",
        "info": "",
        "x": 170,
        "y": 280,
        "wires": []
    },
    {
        "id": "ca96ab2b5ee83be0",
        "type": "catch",
        "z": "3637eeb0.d96232",
        "g": "b189508993904947",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 100,
        "y": 80,
        "wires": [
            [
                "1817757d44df9ab3"
            ]
        ]
    },
    {
        "id": "1817757d44df9ab3",
        "type": "template",
        "z": "3637eeb0.d96232",
        "g": "b189508993904947",
        "name": "messsage",
        "field": "notify.message",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "message: {{error.message}} \\nid: {{error.source.id}} \\nsource type: {{error.source.type}} \\nsource name: {{error.source.name}} \\nsource count: {{error.source.count}}",
        "output": "str",
        "x": 250,
        "y": 80,
        "wires": [
            [
                "4b5032dba0ee7717"
            ]
        ]
    },
    {
        "id": "d9c305f5d3a90eeb",
        "type": "link out",
        "z": "3637eeb0.d96232",
        "g": "b189508993904947",
        "name": "link_out_notify_1",
        "mode": "link",
        "links": [
            "a97f87cfab413716"
        ],
        "x": 655,
        "y": 80,
        "wires": []
    },
    {
        "id": "4b5032dba0ee7717",
        "type": "template",
        "z": "3637eeb0.d96232",
        "g": "b189508993904947",
        "name": "title",
        "field": "notify.title",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Node-RED",
        "output": "str",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "ac9e1209773b9b26"
            ]
        ]
    },
    {
        "id": "ac9e1209773b9b26",
        "type": "template",
        "z": "3637eeb0.d96232",
        "g": "b189508993904947",
        "name": "notification_id",
        "field": "notify.notification_id",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "node-redError",
        "output": "str",
        "x": 540,
        "y": 80,
        "wires": [
            [
                "d9c305f5d3a90eeb"
            ]
        ]
    },
    {
        "id": "4ba92433.2478cc",
        "type": "server",
        "name": "Home Assistant",
        "version": 5,
        "addon": false,
        "rejectUnauthorizedCerts": false,
        "ha_boolean": "y|yes|true|on|home|open",
        "connectionDelay": true,
        "cacheJson": true,
        "heartbeat": true,
        "heartbeatInterval": "30",
        "areaSelector": "id",
        "deviceSelector": "id",
        "entitySelector": "id",
        "statusSeparator": "at: ",
        "statusYear": "hidden",
        "statusMonth": "short",
        "statusDay": "numeric",
        "statusHourCycle": "h23",
        "statusTimeFormat": "h:m",
        "enableGlobalContextStore": true
    }
]